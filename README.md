# Web service for doctor schedules

Dynamic website for doctor's schedule table with authorization. The website was created for ГКП на ПХВ "Талгарская ЦРБ".

## Этапы запуска проекта

Проект можно скачать в арихивной форме, или через команду

```git
git clone https://github.com/dikxarper/doctor-schedule-web-service
```

После переходим в нашу папку

```bash
cd doctor-schedule-web-service
```

Теперь вам нужно будет установить нужные библиотеки

```bash
npm install
```

## Нужные файлы для запуска

Вам нужно будет создать файл .env со следующими переменными. Важно помнить, что переменные пишутся без кавычок. Например `PORT = 2500`, вместо `PORT = "2500"`

```env
// Local Port
PORT = Локальный порт для тестирования или разработки

// Database connection
MYSQL_HOST = Хост базы данных
MYSQL_USER = Пользователь базы данных
MYSQL_PASSWORD = Пароль пользователя
MYSQL_DATABASE = Название базы данных

// Session secret
SESSION_SECRET = Секретный ключ для сессий

// JWT secret
JWT_SECRET = Секретный ключ для JWT токена
JWT_EXPIRES = Срок действия токена
```

## Как работает веб-сервис

Для дальнейшей работы в сервере вам необходимо создать пользователя-админа вручную. В столбце `role` пишем `admin`, задаем пароль и имя пользователя, а остальные столбцы оставляем пустыми. На этом настройка закончивается.

Примечания по созданию пользователей:

1. Если в какой-то день оставить поля времён пустыми (время начало работы и время конца смены), то этот день будет считаться выходным;
2. Поле "ФИО" должно включать "Фамилия Имя Отчество" соответственно;

## Примечания по проекту

Проект имеет следующие недостатки:

1. В проекте не отображаются проверка полей (Validation Results). Если вы заполните поля неправильно, то ошибка будет показываться в JSON формате;
2. Могут возникнуть ошибки отображения навигации в заголовке (navbar in header). По началу в серверном файле создается локальный файл с пользователем со значанием в null, и этот файл может стать причиной неправильного заголовка;
3. Проект не имеет кастомное промежуточное ПО для ошибок, для авторизации;
4. Данные в MySQL не построены по принципу normalization;
5. Пользователь не сможет восстановаить пароль при потерии;
